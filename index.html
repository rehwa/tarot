<!-- 1. 카드 스타일 수정 부분: CSS 수정 -->
<style>
    /* 기존 스타일은 그대로 유지하고 아래 스타일만 추가/수정합니다 */
    .card {
        background-color: var(--secondary-color);
        padding: 20px;
        border-radius: 12px;
        border: 1px solid var(--border-color);
        display: flex;
        flex-direction: column;
    }

    .card h3 {
        margin-top: 0;
        color: var(--primary-color);
        border-bottom: 2px solid var(--border-color);
        padding-bottom: 10px;
        font-size: 18px;
    }

    .card-content {
        display: flex;
        flex-direction: row;
        align-items: flex-start;
        gap: 15px;
    }

    .card-image {
        width: 120px;
        height: 200px;
        object-fit: contain;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    .card-text {
        flex: 1;
    }

    .date-display {
        color: #666;
        font-size: 14px;
        margin-bottom: 12px;
    }

    .card-name {
        color: var(--primary-color);
        font-weight: bold;
        margin: 8px 0;
        font-size: 16px;
    }

    .card-meaning {
        color: #666;
        font-size: 14px;
        line-height: 1.5;
        margin: 8px 0;
    }

    @media (max-width: 767px) {
        .card-content {
            flex-direction: column;
            align-items: center;
        }
        
        .card-image {
            width: 100px;
            height: 166px;
            margin-bottom: 10px;
        }
    }
</style>

<!-- 2. HTML 구조 변경: 카드 표시 부분 수정 -->
<div class="card-result">
    <div class="card">
        <h3>양력(SOLAR) 카드</h3>
        <div class="date-display" id="solarDate">양력: -</div>
        <div class="card-content">
            <img src="" alt="Solar Card" class="card-image" id="solarCardImage" style="display: none;">
            <div class="card-text">
                <div id="solarCardInfo" class="card-info"></div>
            </div>
        </div>
    </div>
    <div class="card">
        <h3>음력(LUNAR) 카드</h3>
        <div class="date-display" id="lunarDate">음력: -</div>
        <div class="card-content">
            <img src="" alt="Lunar Card" class="card-image" id="lunarCardImage" style="display: none;">
            <div class="card-text">
                <div id="lunarCardInfo" class="card-info"></div>
            </div>
        </div>
    </div>
    <div class="card">
        <h3>그림자(SHADOW) 카드</h3>
        <div class="card-content">
            <img src="" alt="Shadow Card" class="card-image" id="shadowCardImage" style="display: none;">
            <div class="card-text">
                <div id="shadowCardInfo" class="card-info"></div>
            </div>
        </div>
    </div>
    <div class="card">
        <h3>소울(SOUL) 카드</h3>
        <div class="card-content">
            <img src="" alt="Soul Card" class="card-image" id="soulCardImage" style="display: none;">
            <div class="card-text">
                <div id="soulCardInfo" class="card-info"></div>
            </div>
        </div>
    </div>
</div>

<!-- 3. JavaScript 함수 수정: 이미지 표시 기능 추가 -->
<script>
    // displayCardInfo 함수 수정: 이미지 표시 기능 추가
    function displayCardInfo(elementId, cardNumber) {
        const cardInfoDiv = document.getElementById(elementId);
        const cardImageId = elementId.replace('CardInfo', 'CardImage');
        const cardImage = document.getElementById(cardImageId);
        
        // 카드 번호가 null이거나 유효하지 않은 경우
        if (cardNumber === null || cardNumber === undefined) {
            cardInfoDiv.innerHTML = `
                <div class="card-name">N/A</div>
                <div class="card-meaning">해당 없음</div>
            `;
            cardImage.style.display = 'none';
            return;
        }
        
        // 카드 번호에 맞는 타로 카드 정보 가져오기
        const normalizedCardNumber = (cardNumber - 1 + tarotCards.length) % tarotCards.length;
        const card = tarotCards[normalizedCardNumber];
        
        // 이미지 경로 설정 (카드 번호에 맞게)
        const cardNum = card.number;
        cardImage.src = `tarot-${cardNum}.jpg`; // 이미지 파일 확장자에 맞게 수정 (.jpg 또는 .png)
        cardImage.alt = card.name;
        cardImage.style.display = 'block';
        
        // 카드 정보 표시
        cardInfoDiv.innerHTML = `
            <div class="card-name">${card.number}. ${card.name}</div>
            <div class="card-meaning">${card.meaning}</div>
        `;
    }

    // 결과 초기화 함수에도 이미지 숨김 처리 추가
    function clearDisplays() {
        document.getElementById('solarDate').textContent = '양력: -';
        document.getElementById('lunarDate').textContent = '음력: -';
        document.getElementById('solarCardInfo').innerHTML = '';
        document.getElementById('lunarCardInfo').innerHTML = '';
        document.getElementById('shadowCardInfo').innerHTML = '';
        document.getElementById('soulCardInfo').innerHTML = '';
        
        // 이미지 초기화
        document.getElementById('solarCardImage').style.display = 'none';
        document.getElementById('lunarCardImage').style.display = 'none';
        document.getElementById('shadowCardImage').style.display = 'none';
        document.getElementById('soulCardImage').style.display = 'none';
    }

    // 이미지 로드 오류 처리
    document.querySelectorAll('.card-image').forEach(img => {
        img.onerror = function() {
            this.src = 'tarot-default.jpg'; // 기본 이미지 (준비해두시면 좋습니다)
            if(this.src.includes('tarot-default.jpg')) {
                this.style.display = 'none'; // 기본 이미지도 없으면 숨김
            }
        };
    });
</script>
